import{d as W,l as L,b as z,s as U,h as j,p as E,r as v,u as N,t as B,c as a,j as k,C as g,F as V,B as y,f as X,g as J,S as $,A as K,G as Z}from"./index-31cb2b85.js";import{w as ee,x as te,G as ae,y as re}from"./GRAPH_SOFTWARE_SALES-6a4de610.js";import{p as se,e as le,g as oe,h as ne,i as ie,j as ue,k as ce,l as de,m as he,n as fe,o as me,q as pe,r as ve,s as Se,t as H,u as be}from"./annual_report_cml_data-50c1218b.js";import{z as Ce,A as ge,D as xe,G as Fe,S as Q,a as G,d as M,E as ke,b as O}from"./GRAPH_CONSOLIDATED_EARNINGS-ce585e49.js";import{T as _}from"./TextInput-8aebddde.js";import{S as R}from"./Space-20864486.js";import"./ChevronIcon-ee121e10.js";const Le=[le,oe,ne,ie,ue,ce,de,he,fe,me,pe,ve,Se],Ye=e=>e.series.map(u=>({title:u.title,releaseDate:u.releaseDate,fyEndMonth:u.fyEndMonth,value:u.value,valueLastFY:u.valueLastFY,valueLastTwoFYs:u.valueLastTwoFYs})),P=Le.map((e,i,u)=>{var b;let t={bandaiNamcoHeader:"Square Enix  - IP Series Data",secondHeader:"First appearance to recent FY",thirdHeader:"Rank",fourthHeader:"Units",ltd:"Life-To-Date",summaryHeader:" Placeholder",fiscalYear:e.fiscalYear,fiscalYearYoY:e.fiscalYear+" Cml. YoY%"},x=Ye(e).filter((r,c,C)=>r).sort((r,c)=>c.value-c.valueLastFY>r.value-r.valueLastFY?1:c.value-c.valueLastFY<r.value-r.valueLastFY?-1:0).map((r,c)=>({...r,rank:c+1})).map(r=>({title:r.title,table:se(r,t,42,11)}));const d=W(e.fiscalYear??"N/A",4),l=L(z([U(d,d.length+1,"left")]),"−","both",!0);let o=j([t.bandaiNamcoHeader,t.secondHeader,t.thirdHeader,t.fourthHeader],32)+`
`+l,m=((b=e==null?void 0:e.notes)==null?void 0:b.length)===0?"":L(E(e==null?void 0:e.notes,40),"=","both",!0,40);return{header:o,titleData:x,fyNotes:m}});function Ee(e){const[i,u]=v.useState(""),t=N(s=>s),[f,S]=v.useState(""),[x,d]=v.useState(0);let l=new Set,o=-1,m=P==null?void 0:P[e.setIndex+o],b=m===void 0?void 0:{header:m.header,titleList:m.titleData,summary:m.fyNotes},r=B(b,"FY Series IP",i,f,l);const c=[{value:r.sectionTitle,placeholder:"Search specific series",label:`Series Search - Number of game series shown: ${x}`,description:"Clear field to show all game series listed."}].filter(s=>s.value===i);v.useEffect(()=>{switch(i){case r.sectionTitle:d(r.titlesLength.length);break}},[f,i,e.setIndex]);const C=Array.from({length:e.yearLength},(s,h)=>{var p;return[{name:"Data Sources",value:(p=Ce)==null?void 0:p[h]},{name:"Consolidated Financial Results",value:ge.get(h),graph:a(Fe,{setData:xe.get(h)})},{name:"Software Sales",value:ee.get(h),graph:a(ae,{setData:te.get(h)})},{name:"FY Series IP",value:r.table}].filter(Y=>Y.value!==void 0)}),F=C[e.setIndex].map(s=>s.name),w=s=>h=>{let[p]=s.filter(Y=>h===Y.name);return(p==null?void 0:p.value)||""},T=s=>h=>{let[p]=s.filter(Y=>h===Y.name);return p==null?void 0:p.graph},I=w(C[e.setIndex]),D=T(C[e.setIndex]);function n(){setTimeout(()=>{u("")},10)}return k("div",{children:[F.filter(s=>s===i).length===0&&i.length!==0?n():a(Q,{fullWidth:!0,orientation:"vertical",value:i,onChange:u,data:F}),i==="Data Sources"?I(i):k(g,{onCopy:s=>G(s,M),style:{backgroundColor:`${t.colour}`,color:t.fontColor==="dark"?"#fff":"#000000"},block:!0,children:[i===r.sectionTitle?k(V,{children:[a(_,{placeholder:c[0].placeholder,label:c[0].label,description:c[0].description,radius:"xl",value:f,onChange:s=>{S(s.target.value.toLowerCase())}}),l.size>0&&f!==l.values().next().value?L(E("Nearest single word search: (To use, click on a word)",40),"−","both",!0,40):void 0,l.size>0&&f!==l.values().next().value?[...l].flatMap((s,h)=>h>3?[]:a(y,{onClick:()=>S(s),radius:"xl",ml:"sm",mb:"sm",variant:"subtle",compact:!0,children:a(g,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${t.colour}`,color:t.fontColor==="dark"?"#fff":"#000000"},children:s})},s)):f===l.values().next().value||x===0?a(y,{onClick:()=>S(""),radius:"xl",m:"sm",variant:"subtle",compact:!0,children:a(g,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${t.colour}`,color:t.fontColor==="dark"?"#fff":"#000000"},children:"Clear Search"})}):void 0,a("br",{})]}):void 0,I(i)]}),D(i)]})}function we(){const[e,i]=v.useState(""),u=N(n=>n),[t,f]=v.useState(""),[S,x]=v.useState(0),[d,l]=v.useState(6),[o,m]=v.useState("FY Cumulative");let b=X(H.titleList,t),r=new Set;t.length!==0&&e==="Square Enix FY Series IP - Cumulative"&&b.map(n=>[...n.title.toLowerCase().matchAll(new RegExp(`(?=\\w*${t})\\w+`,"g"))].flat().map(s=>r.add(s)));let c=b.reduce((n,s)=>n+s.table,""),C=H.header+c+be;const F=[{value:"Square Enix FY Series IP - Cumulative",placeholder:"Search specific series",label:`Series Search - Number of game series shown: ${S}`,description:"Clear field to show all game series listed."}].filter(n=>n.value===e);v.useEffect(()=>{switch(e){case"Square Enix Consolidated Financial Results - Cumulative":l(o==="1st Quarter"?0:o==="2nd Quarter"?1:o==="3rd Quarter"?2:o==="4th Quarter"?3:o==="First Half"?4:o==="First Three Quarters"?5:6);break;case"Square Enix Sales Per Software Unit - Cumulative":l(o==="1st Quarter"?0:o==="2nd Quarter"?1:o==="3rd Quarter"?2:o==="4th Quarter"?3:o==="First Half"?4:o==="First Three Quarters"?5:6);break;case"Square Enix FY Series IP - Cumulative":x(b.length);break}},[t,e,o]);const w=[{name:"Square Enix Consolidated Financial Results - Cumulative",value:ke[d]},{name:"Square Enix Sales Per Software Unit - Cumulative",value:re[d]},{name:"Square Enix FY Series IP - Cumulative",value:C}],T=w.map(n=>n.name),D=(n=>s=>{let[h]=n.filter(p=>s===p.name);return h?h.value:""})(w);return k("div",{children:[a(Q,{fullWidth:!0,orientation:"vertical",value:e,onChange:i,data:T}),k(g,{onCopy:n=>G(n,M),style:{backgroundColor:`${u.colour}`,color:u.fontColor==="dark"?"#fff":"#000000"},block:!0,children:[e==="Square Enix Consolidated Financial Results - Cumulative"||e==="Square Enix Sales Per Software Unit - Cumulative"?a(O,{data:["1st Quarter","2nd Quarter","3rd Quarter","4th Quarter","First Half","First Three Quarters","FY Cumulative"],defaultValue:"FY Cumulative",label:"Select a time period:",radius:"xl",value:o,onChange:m}):void 0,e==="Square Enix FY Series IP - Cumulative"?k(V,{children:[a(_,{placeholder:F[0].placeholder,label:F[0].label,description:F[0].description,radius:"xl",value:t,onChange:n=>{f(n.target.value.toLowerCase())}}),r.size>0&&t!==r.values().next().value?L(E("Nearest single word search: (To use, click on a word)",40),"−","both",!0,40):void 0,r.size>0&&t!==r.values().next().value?[...r].flatMap((n,s)=>s>3?[]:a(y,{onClick:()=>f(n),radius:"xl",ml:"sm",mb:"sm",variant:"subtle",compact:!0,children:a(g,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${u.colour}`,color:u.fontColor==="dark"?"#fff":"#000000"},children:n})},n)):t===r.values().next().value||S===0?a(y,{onClick:()=>f(""),radius:"xl",m:"sm",variant:"subtle",compact:!0,children:a(g,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${u.colour}`,color:u.fontColor==="dark"?"#fff":"#000000"},children:"Clear Search"})}):void 0,a("br",{})]}):void 0,D(e)]}),a(R,{h:"xl"}),a(R,{h:"xl"}),a(R,{h:"xl"}),a(R,{h:"xl"})]})}const A=2023,Re=2023-2004,q=Array.from({length:Re+1},(e,i)=>"FY3/"+(A-i));function Ne(){const e=L(E("Also, visit Install Base. It's a place to discuss and elaborate on the business side of the video game industry.",40),"=","top",!0,40),u=J("Square Enix (They publish Marvel's Avengers), this is where you can find archived data.",40,"−",80),[t,f]=v.useState(""),[S,x]=v.useState("Data by Fiscal Year"),d=N(m=>m),o=(m=>b=>{let[r]=m.map((C,F)=>b===C?F:-1).filter(C=>C!==-1),c=m.length;return r>=0?a(Ee,{setIndex:r,yearLength:c}):null})(q);return k("div",{children:[a($,{mb:"md",align:"center",children:a(g,{style:{backgroundColor:`${d.colour}`,color:d.fontColor==="dark"?"#fff":"#000000"},block:!0,children:u})}),a($,{mb:"md",align:"center",children:k(g,{style:{backgroundColor:`${d.colour}`,color:d.fontColor==="dark"?"#fff":"#000000"},block:!0,children:[e,a(K,{className:"fade",style:{textAlign:"center"},mb:"sm",href:"https://www.installbaseforum.com/",target:"_blank",children:a(g,{style:{backgroundColor:`${d.colour}`,color:d.fontColor==="dark"?"#fff":"#000000"},block:!0,children:L(E("https://www.installbaseforum.com/",36),"−","both",!0,36)})})]})}),a(Q,{mb:"sm",mt:"sm",fullWidth:!0,orientation:"horizontal",value:S,onChange:x,data:["Data by Fiscal Year","Special Page"]}),S==="Data by Fiscal Year"?a(Z,{position:"center",children:a(O,{dropdownPosition:"bottom",mb:"sm",mr:"md",placeholder:"Select",label:`Select a Fiscal Year from ${A-(q.length-1)} to ${A}.`,description:`Fiscal Year ending March ${Number(t==null?void 0:t.slice(4,8))?t==null?void 0:t.slice(4,8):""}.`,radius:"xl",size:"md",data:q,value:t,onChange:f})}):a(we,{}),S==="Data by Fiscal Year"&&typeof t=="string"?o(t):null]})}export{Ne as default};
