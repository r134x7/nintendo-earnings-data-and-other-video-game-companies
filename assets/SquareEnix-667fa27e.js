import{d as j,l as y,b as U,s as B,h as Q,p as R,r as b,u as A,t as X,c as a,j as k,C,F as V,B as T,f as J,g as K,S as H,A as Z,G as ee}from"./index-930d562d.js";import{j as te,l as ae}from"./sales_per_software_unit_cml-d6ad07af.js";import{p as re,e as le,g as se,h as oe,i as ne,j as ie,k as ue,l as ce,m as de,n as he,o as fe,q as pe,r as me,s as ve,t as M,u as be}from"./annual_report_cml_data-e6d7367a.js";import{z as ge,A as Se,D as Ce,G as xe,S as P,c as G,d as O,E as ke,a as Le}from"./GRAPH_CONSOLIDATED_EARNINGS-73c37a8d.js";import{T as z}from"./TextInput-9b493f0e.js";import{S as F}from"./Space-1b4679cf.js";import"./ChevronIcon-f738fafb.js";const Ye=[le,se,oe,ne,ie,ue,ce,de,he,fe,pe,me,ve],we=t=>t.series.map(n=>({title:n.title,releaseDate:n.releaseDate,fyEndMonth:n.fyEndMonth,value:n.value,valueLastFY:n.valueLastFY,valueLastTwoFYs:n.valueLastTwoFYs})),D=Ye.map((t,o,n)=>{var p;let e={bandaiNamcoHeader:"Square Enix  - IP Series Data",secondHeader:"First appearance to recent FY",thirdHeader:"Rank",fourthHeader:"Units",ltd:"Life-To-Date",summaryHeader:" Placeholder",fiscalYear:t.fiscalYear,fiscalYearYoY:t.fiscalYear+" Cml. YoY%"},x=we(t).filter((r,c,g)=>r).sort((r,c)=>c.value-c.valueLastFY>r.value-r.valueLastFY?1:c.value-c.valueLastFY<r.value-r.valueLastFY?-1:0).map((r,c)=>({...r,rank:c+1})).map(r=>({title:r.title,table:re(r,e,42,11)}));const u=j(t.fiscalYear??"N/A",4),i=y(U([B(u,u.length+1,"left")]),"−","both",!0);let L=Q([e.bandaiNamcoHeader,e.secondHeader,e.thirdHeader,e.fourthHeader],32)+`
`+i,h=((p=t==null?void 0:t.notes)==null?void 0:p.length)===0?"":y(R(t==null?void 0:t.notes,40),"=","both",!0,40);return{header:L,titleData:x,fyNotes:h}});function ye(t){const[o,n]=b.useState(""),e=A(s=>s),[d,f]=b.useState(""),[x,u]=b.useState(0);let i=new Set,L=-1,h=D==null?void 0:D[t.setIndex+L],p=h===void 0?void 0:{header:h.header,titleList:h.titleData,summary:h.fyNotes},r=X(p,"FY Series IP",o,d,i);const c=[{value:r.sectionTitle,placeholder:"Search specific series",label:`Series Search - Number of game series shown: ${x}`,description:"Clear field to show all game series listed."}].filter(s=>s.value===o);b.useEffect(()=>{switch(o){case r.sectionTitle:u(r.titlesLength.length);break}},[d,o,t.setIndex]);const g=Array.from({length:t.yearLength},(s,m)=>{var v,w,$;return[{name:"Data Sources",value:(v=ge)==null?void 0:v[m]},{name:"Consolidated Financial Results",value:(w=Se)==null?void 0:w[m],graph:a(xe,{setData:Ce[m]})},{name:"Software Sales",value:($=te)==null?void 0:$[m]},{name:"FY Series IP",value:r.table}].filter(_=>_.value!==void 0)}),Y=g[t.setIndex].map(s=>s.name),l=s=>m=>{let[v]=s.filter(w=>m===w.name);return(v==null?void 0:v.value)||""},S=s=>m=>{let[v]=s.filter(w=>m===w.name);return v==null?void 0:v.graph},E=l(g[t.setIndex]),I=S(g[t.setIndex]);function W(){setTimeout(()=>{n("")},10)}return k("div",{children:[Y.filter(s=>s===o).length===0&&o.length!==0?W():a(P,{fullWidth:!0,orientation:"vertical",value:o,onChange:n,data:Y}),o==="Data Sources"?E(o):k(C,{onCopy:s=>G(s,O),style:{backgroundColor:`${e.colour}`,color:e.fontColor==="dark"?"#fff":"#000000"},block:!0,children:[o===r.sectionTitle?k(V,{children:[a(z,{placeholder:c[0].placeholder,label:c[0].label,description:c[0].description,radius:"xl",value:d,onChange:s=>{f(s.target.value.toLowerCase())}}),i.size>0&&d!==i.values().next().value?y(R("Nearest single word search: (To use, click on a word)",40),"−","both",!0,40):void 0,i.size>0&&d!==i.values().next().value?[...i].flatMap((s,m)=>m>3?[]:a(T,{onClick:()=>f(s),radius:"xl",ml:"sm",mb:"sm",variant:"subtle",compact:!0,children:a(C,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${e.colour}`,color:e.fontColor==="dark"?"#fff":"#000000"},children:s})},s)):d===i.values().next().value||x===0?a(T,{onClick:()=>f(""),radius:"xl",m:"sm",variant:"subtle",compact:!0,children:a(C,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${e.colour}`,color:e.fontColor==="dark"?"#fff":"#000000"},children:"Clear Search"})}):void 0,a("br",{})]}):void 0,E(o)]}),I(o)]})}function Ee(){const[t,o]=b.useState(""),n=A(l=>l),[e,d]=b.useState(""),[f,x]=b.useState(0);let u=J(M.titleList,e),i=new Set;e.length!==0&&t==="Square Enix FY Series IP - Cumulative"&&u.map(l=>[...l.title.toLowerCase().matchAll(new RegExp(`(?=\\w*${e})\\w+`,"g"))].flat().map(S=>i.add(S)));let L=u.reduce((l,S)=>l+S.table,""),h=M.header+L+be;const p=[{value:"Square Enix FY Series IP - Cumulative",placeholder:"Search specific series",label:`Series Search - Number of game series shown: ${f}`,description:"Clear field to show all game series listed."}].filter(l=>l.value===t);b.useEffect(()=>{switch(t){case"Square Enix FY Series IP - Cumulative":x(u.length);break}},[e,t]);const r=[{name:"Square Enix Consolidated Financial Results - Cumulative",value:ke},{name:"Square Enix Sales Per Software Unit - Cumulative",value:ae},{name:"Square Enix FY Series IP - Cumulative",value:h}],c=r.map(l=>l.name),Y=(l=>S=>{let[E]=l.filter(I=>S===I.name);return E?E.value:""})(r);return k("div",{children:[a(P,{fullWidth:!0,orientation:"vertical",value:t,onChange:o,data:c}),k(C,{onCopy:l=>G(l,O),style:{backgroundColor:`${n.colour}`,color:n.fontColor==="dark"?"#fff":"#000000"},block:!0,children:[t==="Square Enix FY Series IP - Cumulative"?k(V,{children:[a(z,{placeholder:p[0].placeholder,label:p[0].label,description:p[0].description,radius:"xl",value:e,onChange:l=>{d(l.target.value.toLowerCase())}}),i.size>0&&e!==i.values().next().value?y(R("Nearest single word search: (To use, click on a word)",40),"−","both",!0,40):void 0,i.size>0&&e!==i.values().next().value?[...i].flatMap((l,S)=>S>3?[]:a(T,{onClick:()=>d(l),radius:"xl",ml:"sm",mb:"sm",variant:"subtle",compact:!0,children:a(C,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${n.colour}`,color:n.fontColor==="dark"?"#fff":"#000000"},children:l})},l)):e===i.values().next().value||f===0?a(T,{onClick:()=>d(""),radius:"xl",m:"sm",variant:"subtle",compact:!0,children:a(C,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${n.colour}`,color:n.fontColor==="dark"?"#fff":"#000000"},children:"Clear Search"})}):void 0,a("br",{})]}):void 0,Y(t)]}),a(F,{h:"xl"}),a(F,{h:"xl"}),a(F,{h:"xl"}),a(F,{h:"xl"})]})}const q=2023,N=Array.from({length:20},(t,o)=>"FY3/"+(q-o));function Ae(){const t=y(R("Also, visit Install Base. It's a place to discuss and elaborate on the business side of the video game industry.",40),"=","top",!0,40),n=K("Square Enix (They publish Marvel's Avengers), this is where you can find archived data.",40,"−",80),[e,d]=b.useState(""),[f,x]=b.useState("Data by Fiscal Year"),u=A(h=>h),L=(h=>p=>{let[r]=h.map((g,Y)=>p===g?Y:-1).filter(g=>g!==-1),c=h.length;return r>=0?a(ye,{setIndex:r,yearLength:c}):null})(N);return k("div",{children:[a(H,{mb:"md",align:"center",children:a(C,{style:{backgroundColor:`${u.colour}`,color:u.fontColor==="dark"?"#fff":"#000000"},block:!0,children:n})}),a(H,{mb:"md",align:"center",children:k(C,{style:{backgroundColor:`${u.colour}`,color:u.fontColor==="dark"?"#fff":"#000000"},block:!0,children:[t,a(Z,{className:"fade",style:{textAlign:"center"},mb:"sm",href:"https://www.installbaseforum.com/",target:"_blank",children:a(C,{style:{backgroundColor:`${u.colour}`,color:u.fontColor==="dark"?"#fff":"#000000"},block:!0,children:y(R("https://www.installbaseforum.com/",36),"−","both",!0,36)})})]})}),a(P,{mb:"sm",mt:"sm",fullWidth:!0,orientation:"horizontal",value:f,onChange:x,data:["Data by Fiscal Year","Special Page"]}),f==="Data by Fiscal Year"?a(ee,{position:"center",children:a(Le,{dropdownPosition:"bottom",mb:"sm",mr:"md",placeholder:"Select",label:`Select a Fiscal Year from ${q-(N.length-1)} to ${q}.`,description:`Fiscal Year ending March ${Number(e==null?void 0:e.slice(4,8))?e==null?void 0:e.slice(4,8):""}.`,radius:"xl",size:"md",data:N,value:e,onChange:d})}):a(Ee,{}),f==="Data by Fiscal Year"&&typeof e=="string"?L(e):null]})}export{Ae as default};
