import{d as _,l as L,b as j,s as U,h as B,p as E,r as v,u as A,t as X,c as a,j as F,C as g,F as V,B as R,f as J,g as K,S as H,A as Z,G as ee}from"./index-fcaa4416.js";import{j as te,l as ae}from"./sales_per_software_unit_cml-0bf5b263.js";import{p as re,e as le,g as se,h as oe,i as ne,j as ie,k as ue,l as ce,m as de,n as he,o as fe,q as me,r as pe,s as ve,t as Q,u as be}from"./annual_report_cml_data-0c622dd8.js";import{z as Ce,A as Se,D as ge,G as xe,S as $,a as M,d as G,E as ke,b as O}from"./GRAPH_CONSOLIDATED_EARNINGS-9766357b.js";import{T as z}from"./TextInput-b2ece3b6.js";import{S as y}from"./Space-daa04bf0.js";import"./ChevronIcon-e906b96a.js";const Fe=[le,se,oe,ne,ie,ue,ce,de,he,fe,me,pe,ve],Ye=e=>e.series.map(n=>({title:n.title,releaseDate:n.releaseDate,fyEndMonth:n.fyEndMonth,value:n.value,valueLastFY:n.valueLastFY,valueLastTwoFYs:n.valueLastTwoFYs})),N=Fe.map((e,o,n)=>{var C;let t={bandaiNamcoHeader:"Square Enix  - IP Series Data",secondHeader:"First appearance to recent FY",thirdHeader:"Rank",fourthHeader:"Units",ltd:"Life-To-Date",summaryHeader:" Placeholder",fiscalYear:e.fiscalYear,fiscalYearYoY:e.fiscalYear+" Cml. YoY%"},x=Ye(e).filter((r,c,S)=>r).sort((r,c)=>c.value-c.valueLastFY>r.value-r.valueLastFY?1:c.value-c.valueLastFY<r.value-r.valueLastFY?-1:0).map((r,c)=>({...r,rank:c+1})).map(r=>({title:r.title,table:re(r,t,42,11)}));const h=_(e.fiscalYear??"N/A",4),i=L(j([U(h,h.length+1,"left")]),"−","both",!0);let u=B([t.bandaiNamcoHeader,t.secondHeader,t.thirdHeader,t.fourthHeader],32)+`
`+i,f=((C=e==null?void 0:e.notes)==null?void 0:C.length)===0?"":L(E(e==null?void 0:e.notes,40),"=","both",!0,40);return{header:u,titleData:x,fyNotes:f}});function Le(e){const[o,n]=v.useState(""),t=A(l=>l),[d,b]=v.useState(""),[x,h]=v.useState(0);let i=new Set,u=-1,f=N==null?void 0:N[e.setIndex+u],C=f===void 0?void 0:{header:f.header,titleList:f.titleData,summary:f.fyNotes},r=X(C,"FY Series IP",o,d,i);const c=[{value:r.sectionTitle,placeholder:"Search specific series",label:`Series Search - Number of game series shown: ${x}`,description:"Clear field to show all game series listed."}].filter(l=>l.value===o);v.useEffect(()=>{switch(o){case r.sectionTitle:h(r.titlesLength.length);break}},[d,o,e.setIndex]);const S=Array.from({length:e.yearLength},(l,m)=>{var p,Y;return[{name:"Data Sources",value:(p=Ce)==null?void 0:p[m]},{name:"Consolidated Financial Results",value:Se.get(m),graph:a(xe,{setData:ge.get(m)})},{name:"Software Sales",value:(Y=te)==null?void 0:Y[m]},{name:"FY Series IP",value:r.table}].filter(W=>W.value!==void 0)}),k=S[e.setIndex].map(l=>l.name),w=l=>m=>{let[p]=l.filter(Y=>m===Y.name);return(p==null?void 0:p.value)||""},T=l=>m=>{let[p]=l.filter(Y=>m===Y.name);return p==null?void 0:p.graph},I=w(S[e.setIndex]),D=T(S[e.setIndex]);function s(){setTimeout(()=>{n("")},10)}return F("div",{children:[k.filter(l=>l===o).length===0&&o.length!==0?s():a($,{fullWidth:!0,orientation:"vertical",value:o,onChange:n,data:k}),o==="Data Sources"?I(o):F(g,{onCopy:l=>M(l,G),style:{backgroundColor:`${t.colour}`,color:t.fontColor==="dark"?"#fff":"#000000"},block:!0,children:[o===r.sectionTitle?F(V,{children:[a(z,{placeholder:c[0].placeholder,label:c[0].label,description:c[0].description,radius:"xl",value:d,onChange:l=>{b(l.target.value.toLowerCase())}}),i.size>0&&d!==i.values().next().value?L(E("Nearest single word search: (To use, click on a word)",40),"−","both",!0,40):void 0,i.size>0&&d!==i.values().next().value?[...i].flatMap((l,m)=>m>3?[]:a(R,{onClick:()=>b(l),radius:"xl",ml:"sm",mb:"sm",variant:"subtle",compact:!0,children:a(g,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${t.colour}`,color:t.fontColor==="dark"?"#fff":"#000000"},children:l})},l)):d===i.values().next().value||x===0?a(R,{onClick:()=>b(""),radius:"xl",m:"sm",variant:"subtle",compact:!0,children:a(g,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${t.colour}`,color:t.fontColor==="dark"?"#fff":"#000000"},children:"Clear Search"})}):void 0,a("br",{})]}):void 0,I(o)]}),D(o)]})}function Ee(){const[e,o]=v.useState(""),n=A(s=>s),[t,d]=v.useState(""),[b,x]=v.useState(0),[h,i]=v.useState(6),[u,f]=v.useState("FY Cumulative");let C=J(Q.titleList,t),r=new Set;t.length!==0&&e==="Square Enix FY Series IP - Cumulative"&&C.map(s=>[...s.title.toLowerCase().matchAll(new RegExp(`(?=\\w*${t})\\w+`,"g"))].flat().map(l=>r.add(l)));let c=C.reduce((s,l)=>s+l.table,""),S=Q.header+c+be;const k=[{value:"Square Enix FY Series IP - Cumulative",placeholder:"Search specific series",label:`Series Search - Number of game series shown: ${b}`,description:"Clear field to show all game series listed."}].filter(s=>s.value===e);v.useEffect(()=>{switch(e){case"Square Enix Consolidated Financial Results - Cumulative":i(u==="1st Quarter"?0:u==="2nd Quarter"?1:u==="3rd Quarter"?2:u==="4th Quarter"?3:u==="First Half"?4:u==="First Three Quarters"?5:6);break;case"Square Enix FY Series IP - Cumulative":x(C.length);break}},[t,e,u]);const w=[{name:"Square Enix Consolidated Financial Results - Cumulative",value:ke[h]},{name:"Square Enix Sales Per Software Unit - Cumulative",value:ae},{name:"Square Enix FY Series IP - Cumulative",value:S}],T=w.map(s=>s.name),D=(s=>l=>{let[m]=s.filter(p=>l===p.name);return m?m.value:""})(w);return F("div",{children:[a($,{fullWidth:!0,orientation:"vertical",value:e,onChange:o,data:T}),F(g,{onCopy:s=>M(s,G),style:{backgroundColor:`${n.colour}`,color:n.fontColor==="dark"?"#fff":"#000000"},block:!0,children:[e==="Square Enix Consolidated Financial Results - Cumulative"?a(O,{data:["1st Quarter","2nd Quarter","3rd Quarter","4th Quarter","First Half","First Three Quarters","FY Cumulative"],defaultValue:"FY Cumulative",label:"Select a time period:",radius:"xl",value:u,onChange:f}):void 0,e==="Square Enix FY Series IP - Cumulative"?F(V,{children:[a(z,{placeholder:k[0].placeholder,label:k[0].label,description:k[0].description,radius:"xl",value:t,onChange:s=>{d(s.target.value.toLowerCase())}}),r.size>0&&t!==r.values().next().value?L(E("Nearest single word search: (To use, click on a word)",40),"−","both",!0,40):void 0,r.size>0&&t!==r.values().next().value?[...r].flatMap((s,l)=>l>3?[]:a(R,{onClick:()=>d(s),radius:"xl",ml:"sm",mb:"sm",variant:"subtle",compact:!0,children:a(g,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${n.colour}`,color:n.fontColor==="dark"?"#fff":"#000000"},children:s})},s)):t===r.values().next().value||b===0?a(R,{onClick:()=>d(""),radius:"xl",m:"sm",variant:"subtle",compact:!0,children:a(g,{style:{border:"solid",borderWidth:"1px",borderRadius:"16px",backgroundColor:`${n.colour}`,color:n.fontColor==="dark"?"#fff":"#000000"},children:"Clear Search"})}):void 0,a("br",{})]}):void 0,D(e)]}),a(y,{h:"xl"}),a(y,{h:"xl"}),a(y,{h:"xl"}),a(y,{h:"xl"})]})}const q=2023,P=Array.from({length:20},(e,o)=>"FY3/"+(q-o));function Pe(){const e=L(E("Also, visit Install Base. It's a place to discuss and elaborate on the business side of the video game industry.",40),"=","top",!0,40),n=K("Square Enix (They publish Marvel's Avengers), this is where you can find archived data.",40,"−",80),[t,d]=v.useState(""),[b,x]=v.useState("Data by Fiscal Year"),h=A(f=>f),u=(f=>C=>{let[r]=f.map((S,k)=>C===S?k:-1).filter(S=>S!==-1),c=f.length;return r>=0?a(Le,{setIndex:r,yearLength:c}):null})(P);return F("div",{children:[a(H,{mb:"md",align:"center",children:a(g,{style:{backgroundColor:`${h.colour}`,color:h.fontColor==="dark"?"#fff":"#000000"},block:!0,children:n})}),a(H,{mb:"md",align:"center",children:F(g,{style:{backgroundColor:`${h.colour}`,color:h.fontColor==="dark"?"#fff":"#000000"},block:!0,children:[e,a(Z,{className:"fade",style:{textAlign:"center"},mb:"sm",href:"https://www.installbaseforum.com/",target:"_blank",children:a(g,{style:{backgroundColor:`${h.colour}`,color:h.fontColor==="dark"?"#fff":"#000000"},block:!0,children:L(E("https://www.installbaseforum.com/",36),"−","both",!0,36)})})]})}),a($,{mb:"sm",mt:"sm",fullWidth:!0,orientation:"horizontal",value:b,onChange:x,data:["Data by Fiscal Year","Special Page"]}),b==="Data by Fiscal Year"?a(ee,{position:"center",children:a(O,{dropdownPosition:"bottom",mb:"sm",mr:"md",placeholder:"Select",label:`Select a Fiscal Year from ${q-(P.length-1)} to ${q}.`,description:`Fiscal Year ending March ${Number(t==null?void 0:t.slice(4,8))?t==null?void 0:t.slice(4,8):""}.`,radius:"xl",size:"md",data:P,value:t,onChange:d})}):a(Ee,{}),b==="Data by Fiscal Year"&&typeof t=="string"?u(t):null]})}export{Pe as default};
